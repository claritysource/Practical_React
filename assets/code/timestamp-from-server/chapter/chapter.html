<html xmlns='http://www.w3.org/1999/xhtml' xmlns:dk='http://www.kirsanov.com'>
  <head>
    <title>Get Timestamp from Server</title>  
    <meta http-equiv='content-type' content='text/html; charset=UTF-8'/>  
    <link rel='stylesheet' type='text/css' href='./css/book.css'/>  
  </head>  
  <body style='counter-reset: h1 2'> 
    <h1 class='basic'>Get Timestamp from Server</h1> 
      <p>This exercise involves...</p>

    <h2>Rationale</h2>
      <p></p>

    <h2>Expectations</h2>
      <p></p>

    <h2>Level of Difficulty</h2>
      <p>X out of 10</p>

    <h2 id='concepts'>Concepts</h2> 
      <p></p>
    <h2 id='exercise-description'>The Exercise Description</h2> 
      <p></p>
    <p>The starting point for the Get Timestamp from Server exercise is shown in the following figure.</p>
    <img src="./images/start.png" width="974" height="804"/>
      
      <pre id='sec1-1'>
1  import React from 'react';
2  import './App.css';
3  
4  // Sleep for the specified delay in milliseconds
5  const sleep = delay =&gt; {} // Step 1: Implement the sleep() function
6  
7  const getDateFromServer = async () =&gt; {
8    await sleep(1000)
9  
10   if (Math.random() &gt; 0.5) {
11     return {
12       date: new Date()
13     }
14   }
15   else {
16     return {
17       error: 'Server error'
18     }
19   }
20 }
21 
22 const Start = () =&gt; {
23   return (
24     &lt;div&gt;
25       Show date or server error here
26     &lt;/div&gt;
27   )
28 }
29 
30 export default Start;
      </pre>

<p></p>
    <h2 id='start'>The Solution</h2> 
      <p>The solution for the Get Timestamp from Server exercise is shown in the following figure.</p>
      <img src="./images/solution-date.png" width="974" height="804"/>
      <p>...</p>

      <img src="./images/solution-error.png" width="974" height="804"/>
       <p>The code for the solution to the Get Timestamp from Server exercise is shown in the following listing.</p>
      <pre id='sec1-1'>
1  import React, { useEffect, useState } from 'react';
2  import './App.css';
3  
4  const sleep = delay =&gt; new Promise(resolve =&gt; setTimeout(resolve, delay))
5  
6  const getDateFromServer = async () =&gt; {
7    await sleep(1000)
8  
9    if (Math.random() &gt; 0.5) {
10     return {
11       date: new Date()
12     }
13   }
14   else {
15     return {
16       error: 'Server error'
17     }
18   }
19 }
20 
21 const Solution = () =&gt; {
22   const [date, setDate] = useState(null)
23   const [error, setError] = useState(null)
24 
25   useEffect(() =&gt; {
26     const getDate = async () =&gt; {
27       const serverDate = await getDateFromServer()
28 
29       if (serverDate.error) {
30         setError(serverDate.error)
31       }
32       else {
33         setDate(serverDate.date.toString())
34       }
35     } 
36 
37     if (date === null && error === null) {
38       getDate()
39     }
40   }, [date, error])
41 
42   return (
43     date === null && error === null ? &lt;div&gt;Loading...&lt;/div&gt; :
44     &lt;div&gt;
45       {error ? error : date}
46     &lt;/div&gt;
47   )
48 }
49 
50 export default Solution;
      </pre>
    <p></p>
  </body> 
</html>

<p></p>

<h1>Conclusion</h1>

<p></p>
